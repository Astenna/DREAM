\chapter{Code Structure} \label{ch:code_structure}

\section{Client}

\begin{forest}
    pic dir tree,
    where level=0{}{% folder icons by default; override using file for file icons
        directory,
    },
    [Code
        [Client
            [public]
            [src
                [api]
                [assets]
                [model]
                [modules]
                [store]
                [stylesheets]
                [values, 
                    label=right:\textit{This is a comment about this directory.}
                ]
            ]
            [example\_file.txt, file,
                label=right:\textit{This is a comment about this file.}
            ]
        ]
    ]
\end{forest}

\section{Server}
\begin{forest}
    pic dir tree,
    where level=0{}{% folder icons by default; override using file for file icons
        directory,
    },
    [Code
        [Server
            [API
                [Controllers,
                    label=right:\textit{Contains controllers with API endpoints definitions.}
                ]
                [Middleware \hspace{0.15em}
                    \textit{Contains exception middleware for mapping exceptions}\\ \textit{to proper HTTP status codes.},
                    edge path'/.expanded={
                        ([xshift=\forestregister{folder indent}]!u.parent anchor) |- ([yshift=.6ex].base west)
                }] 
                [Properties,
                    label=right:\textit{Contains launch settings of the application.}
                ]
            ]
            [BusinessLogic
                [Dtos,
                    label=right:\textit{Consists of data transfer objects definitions.}]
                [Exceptions,
                    label=right:\textit{Contains custom exceptions.}
                ]
                [Mapper \hspace{0.15em}
                    \textit{Contains Mapper Profiles that defines mappings between} \\ \textit{entities and data transfer objects.},
                    edge path'/.expanded={ ([xshift=\forestregister{folder indent}]!u.parent anchor) |- ([yshift=.6ex].base west)
                }]
                [Queries,
                    label=right:\textit{Contains classes defining query parameters available in API requests.}
                ]
                [ServiceCollectionExtensions,
                    label=right:\textit{Defines classes required for middleware additions.}
                ]
                [Services,
                    label=right:\textit{Contains classes with business logic.}
                ]
                [Tools,
                    label=right:\textit{Contains utility classes such as TokenProvider for generating JWT tokens.}
                ]
            ]
            [DataAccess
                [AutoMigrations \hspace{0.15em}
                    \textit{Contains classes required for performing automatic } \\ \textit{database migrations during application startup.},
                    edge path'/.expanded={ ([xshift=\forestregister{folder indent}]!u.parent anchor) |- ([yshift=.6ex].base west)
                }]
                [Configuration,
                    label=right:\textit{Configures  entities relationships and constraints.}
                ]
                [Entities,
                    label=right:\textit{Consists of entities mapped to database tables.}
                ]
                [Migrations,
                    label=right:\textit{Consists of classes defining database migrations.}
                ]
                [Seeder,
                    label=right:\textit{Contains SQL scripts and classes for seeding the database.}
                ]
                [DreamDbContext \hspace{0.15em}
                    \textit{Class that acts as a bridge between the application}\\ \textit{and the database.},
                    edge path'/.expanded={ ([xshift=\forestregister{folder indent}]!u.parent anchor) |- ([yshift=.6ex].base west)
                },
                base=top,
                file
                ]
            ]
        ]
    ]
\end{forest}

\section{System Tests}

\begin{forest}
    pic dir tree,
    where level=0{}{% folder icons by default; override using file for file icons
        directory,
    },
    [Code
        [system\_tests,
            label=right:\textit{Parent directory for all the system tests.}
            [constants,
                label=right:\textit{It contains all the constants used including endpoints and UI messages.}
            ]
            [helpers,
                label=right:\textit{It contains functions facilitating repetitive work and seeding the database.}
            ]
            [models,
                label=right:\textit{It consists of classes that match entities existing in the system.}
            ]
            [scenarios,
                label=right:\textit{It contains functions responsible for interactions with UI components.}
            ]
            [conftest.py, file,
                label=right:\textit{File containing fixtures used throughout the testing process.}
            ]
            [pytest.ini, file,
                label=right:\textit{Primary configuration file of pytest.}
            ]
            [requirements.txt, file,
                label=right:\textit{Depicts necessary libraries to set up the testing environment.}
            ]
            [test\_create\_account.py, file]
            [test\_log\_in.py, file]
            [test\_log\_out.py, file]
            [test \textit{Also some longer text.}\\\textit{Also some longer text.},
                edge path'/.expanded={
                    ([xshift=\forestregister{folder indent}]!u.parent anchor) |- ([yshift=.6ex].base west)
                },
                base=top,
                file
            ]
        ]
    ]
\end{forest}
