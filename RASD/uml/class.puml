@startuml Class

enum Note {
    Positive
    Neutral
    Negative
}
enum WeatherType {
    Sunny
    MostlyCloudy
    Cloudy
    Rainy
    Lightning
}
enum VisitState {
    planned
    confirmed
    rejected
}

abstract class User {
    +email
    +name
    +surname
    +password
}
class PolicyMaker
class Agronomist
class Farmer {
    +note: Note
}
class Farm {
    +id
    +name
}
class Mandal {
    +id
    +name
}
class Production {
    +id
    +amount
    +date
}

class WaterIrrigationSystemResponse {
    +id
    +waterUsed
    +date
}
class SensorSystemResponse {
    +id
    +sensorId
    +humidity
    +date
}
class WeatherSystemResponse {
    +id
    +degrees
    +rainfall
    +type: WeatherType
    +date
}

class ProductionType {
    +id
    +name
}
class HelpRequest {
    +id
    +topic
    +message
    +createDateTime
    +isAutoGenerated
}
class HelpResponse {
    +id
    +message
    +createDateTime
}
class Visit {
    +id
    +comment
    +date
    +state: VisitState
} 
class ForumThread {
    +id
    +topic
    +message
    +createDateTime
}
class ForumComment {
    +id
    +message
    +createDateTime
}
'ForumComment?

PolicyMaker <|-- User
Agronomist <|-- User
Farmer <|-- User


Farm "0..*" o-- "1" Mandal : belongs to >
Farm "1" *-- "0..*" Production : produces >
Farm "1" *-- "0..*" WaterIrrigationSystemResponse : has >
Farm "1" *-- "0..*" SensorSystemResponse : has >

Mandal "1" *-- "0..*" WeatherSystemResponse : has >

Agronomist "1..*" o-- "1..*" Mandal : belongs to >
Production "0..*" o-- "1" ProductionType : has a >

Farm "1" --* "1" Farmer

Farmer "1" *-- "0..*" HelpRequest : creates >
Farmer "0..*" --o "0..*" HelpRequest : receives < 
Agronomist "0..*" --o "0..*" HelpRequest : receives < 
HelpRequest "1" *-- "0..*" HelpResponse : contains >
HelpResponse "0..*" o-- "0..1" Farmer : created by >
HelpResponse "0..*" o-- "0..1" Agronomist : created by >
'XOR 

Agronomist "1" *-- "0..*" Visit : does >
Visit "0..*" o-- "1" Farm : refers to >

ForumThread "1" *-- "0..*" ForumComment : has >
ForumThread "0..*" o-- "1" Farmer : created by >
ForumComment "0..*" o-- "1" Farmer : created by >

@enduml
